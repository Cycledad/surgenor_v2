<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="C:/Users/wayne/surgenor_v2/app/mysite.db" readonly="0" foreign_keys="0" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="5993"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><current_table name="4,8:mainOrderTbl"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="ARCHIVE_Department" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="40"/><column index="2" value="73"/><column index="3" value="90"/><column index="4" value="96"/><column index="5" value="48"/><column index="6" value="93"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="ARCHIVE_OrderTbl" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="50"/><column index="2" value="87"/><column index="3" value="146"/><column index="4" value="96"/><column index="5" value="132"/><column index="6" value="130"/><column index="7" value="133"/><column index="8" value="173"/><column index="9" value="155"/><column index="10" value="154"/><column index="11" value="188"/><column index="12" value="222"/><column index="13" value="142"/><column index="14" value="109"/><column index="15" value="121"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="ARCHIVE_ProvincialTaxRates" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="50"/><column index="2" value="135"/><column index="3" value="74"/><column index="4" value="50"/><column index="5" value="59"/><column index="6" value="121"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="ARCHIVE_PurchaseOrder" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="50"/><column index="2" value="174"/><column index="3" value="121"/><column index="4" value="251"/><column index="5" value="187"/><column index="6" value="240"/><column index="7" value="165"/><column index="8" value="238"/><column index="9" value="279"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="ARCHIVE_Purchaser" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="40"/><column index="2" value="72"/><column index="3" value="118"/><column index="4" value="116"/><column index="5" value="160"/><column index="6" value="157"/><column index="7" value="96"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="ARCHIVE_User" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="50"/><column index="2" value="78"/><column index="3" value="94"/><column index="4" value="72"/><column index="5" value="300"/><column index="6" value="142"/><column index="7" value="159"/><column index="8" value="87"/><column index="9" value="142"/><column index="10" value="95"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="OrderTbl" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="50"/><column index="2" value="87"/><column index="3" value="146"/><column index="4" value="96"/><column index="5" value="201"/><column index="6" value="130"/><column index="7" value="133"/><column index="8" value="173"/><column index="9" value="155"/><column index="10" value="154"/><column index="11" value="188"/><column index="12" value="300"/><column index="13" value="142"/><column index="14" value="109"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="PurchaseOrder" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="50"/><column index="2" value="174"/><column index="3" value="251"/><column index="4" value="187"/><column index="5" value="240"/><column index="6" value="165"/><column index="7" value="238"/><column index="8" value="279"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Purchaser" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="40"/><column index="2" value="81"/><column index="3" value="118"/><column index="4" value="116"/><column index="5" value="160"/><column index="6" value="157"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="User" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="40"/><column index="2" value="130"/><column index="3" value="116"/><column index="4" value="81"/><column index="5" value="300"/><column index="6" value="82"/><column index="7" value="48"/><column index="8" value="93"/><column index="9" value="95"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1">insert into ARCHIVE_Department (deptname, dateCreated, active, dateInActive) select deptname, dateCreated,  active, dateInActive 
from department where active = 0;

delete from Department where active = 0;
</sql><sql name="SQL 2">
DROP TABLE IF EXISTS ARCHIVE_Purchaser;
CREATE TABLE ARCHIVE_Purchaser (
	id INTEGER NOT NULL,
	username text not null,
	purchaserDeptId INTEGER NOT NULL,
	purchaserActive BOOLEAN NOT NULL,    /* boolean */
	purchaserDateInActive TEXT,
	purchaserDateCreated TEXT DEFAULT(DATE()) NOT NULL,
	dateArchived integer DEFAULT(date('now', 'localtime')) NOT NULL,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT)

);
	
insert into ARCHIVE_Purchaser (username, purchaserDeptId, purchaserActive, purchaserDateInActive, purchaserDateCreated) 
select username, purchaserDeptId, purchaserActive, purchaserDateInActive, purchaserDateCreated 
from Purchaser where purchaserActive = 0;	

delete from Purchaser where purchaserActive = 0</sql><sql name="SQL 3">DROP TABLE IF EXISTS ARCHIVE_Supplier;
CREATE TABLE ARCHIVE_Supplier (
	id INTEGER NOT NULL,
	supplierName TEXT NOT NULL,
	supplierProv TEXT NOT NULL,
	supplierActive BOOLEAN NOT NULL,    /* boolean */
	supplierDateCreated TEXT DEFAULT(DATE()) NOT NULL,
	dateArchived integer DEFAULT(date('now', 'localtime')) NOT NULL,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT)
	
);
insert into ARCHIVE_Supplier (supplierName, supplierProv, supplierActive, supplierDateCreated) 
select supplierName, supplierProv, supplierActive, supplierDateCreated 
from Supplier where supplierActive = 0;	

delete from Supplier where supplierActive = 0;</sql><sql name="SQL 4">drop table if exists ARCHIVE_User;
CREATE TABLE ARCHIVE_User (
	id	INTEGER,
	givenName   TEXT NOT NULL,
	surname     TEXT NOT NULL,
	username	TEXT NOT NULL,
	password	TEXT NOT NULL,
	createDate	TEXT DEFAULT(DATE()) NOT NULL,
	dateArchived integer DEFAULT(date('now', 'localtime')) NOT NULL,
	active	BOOLEAN DEFAULT(TRUE) NOT NULL, /* boolean */
	dateInActive TEXT,
	securityLevel INTEGER,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT));
	
insert into ARCHIVE_User (givenName, surname, username, password, createDate, active, dateInActive, securityLevel) 
select givenName, surname, username, password, createDate, active, dateInActive, securityLevel 
from user WHERE active = 0 	

delete from user where active = 0;</sql><sql name="SQL 5">drop table if exists ARCHIVE_ProvincialTaxRates;
CREATE TABLE ARCHIVE_ProvincialTaxRates (
	id	INTEGER,
	provincialCode TEXT NOT NULL,
	taxRate	float NOT NULL,
	label TEXT NOT NULL,
	active BOOLEAN DEFAULT(TRUE) NOT NULL,    /* boolean */
    dateArchived integer DEFAULT(date('now', 'localtime')) NOT NULL,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT)
);

insert into ARCHIVE_ProvincialTaxRates (provincialCode, taxRate, label, active) 
select provincialCode, taxRate, label, active 
from ProvincialTaxRates where active = 0;

delete from ProvincialTaxRates where active = 0;</sql><sql name="SQL 6">DROP TABLE IF EXISTS ARCHIVE_PurchaseOrder;
CREATE TABLE ARCHIVE_PurchaseOrder(
id INTEGER NOT NULL,
purchaseOrderDate TEXT DEFAULT(DATE()) NOT NULL,
dateArchived integer DEFAULT(date('now', 'localtime')) NOT NULL,
purchaseOrderReceivedDate TEXT,
purchaseOrderActive BOOLEAN DEFAULT(TRUE) NOT NULL,
purchaseOrderDateDeleted TEXT,
purchaseOrderNbr INTEGER NOT NULL,
purchaseOrderPurchaserId INTEGER NOT NULL,
purchaseOrderPurchaserDeptId INTEGER NOT NULL,
PRIMARY KEY(&quot;id&quot; AUTOINCREMENT)
);

INSERT INTO ARCHIVE_PurchaseOrder (purchaseOrderDate, purchaseOrderReceivedDate, purchaseOrderActive, 
purchaseOrderDateDeleted, purchaseOrderNbr, purchaseOrderPurchaserId, purchaseOrderPurchaserDeptId) 

SELECT purchaseOrderDate, purchaseOrderReceivedDate, purchaseOrderActive, 
purchaseOrderDateDeleted, purchaseOrderNbr, purchaseOrderPurchaserId, purchaseOrderPurchaserDeptId 
FROM PurchaseOrder p, ordertbl o WHERE p.purchaseOrderNbr = o.orderNbr and o.OrderActive = 0; 

PRAGMA foreign_keys = OFF;
PRAGMA foreign_keys;

delete from PurchaseOrder where  purchaseOrderNbr in (
select orderNbr from OrderTbl, PurchaseOrder where ordertbl.OrderActive = 0 and PurchaseOrder.purchaseOrderNbr = OrderTbl.OrderNbr) ;</sql><sql name="SQL 7">DROP TABLE IF EXISTS ARCHIVE_OrderTbl;
CREATE TABLE ARCHIVE_OrderTbl (
	id INTEGER NOT NULL,
	OrderNbr INTEGER NOT NULL,
	OrderSupplierId INTEGER NOT NULL,
	deptName TEXT NOT NULL,
	OrderPartDesc TEXT NOT NULL,
	OrderQuantity INTEGER NOT NULL,
	OrderPartPrice REAL DEFAULT(0.0) NOT NULL,
	OrderReceivedDate TEXT,
	OrderReceivedBy TEXT,
	OrderReturnDate TEXT,
	OrderReturnQuantity INTEGER,
	PO TEXT,
	OrderUsername TEXT NOT NULL,
	OrderActive BOOLEAN DEFAULT(TRUE) NOT NULL,
	dateArchived integer DEFAULT(date('now', 'localtime')) NOT NULL,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT)
	--FOREIGN KEY(OrderSupplierId) REFERENCES Supplier (id),
	--FOREIGN KEY(OrderNbr) REFERENCES purchaseOrder (purchaseOrderNbr)
	
);
INSERT INTO ARCHIVE_OrderTbl (OrderNbr, OrderSupplierId, deptName, OrderPartDesc, OrderQuantity, OrderPartPrice, OrderReceivedDate, OrderReceivedBy, 
								OrderReturnDate, OrderReturnQuantity, PO, OrderUsername, OrderActive) 
								SELECT OrderNbr, OrderSupplierId, deptName, OrderPartDesc, OrderQuantity, OrderPartPrice, OrderReceivedDate, OrderReceivedBy, 
								OrderReturnDate, OrderReturnQuantity, PO, OrderUsername, OrderActive FROM OrderTbl WHERE OrderActive = 0;
								
delete from OrderTbl where OrderActive = 0;</sql><current_tab id="5"/></tab_sql></sqlb_project>
